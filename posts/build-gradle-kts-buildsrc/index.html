<!DOCTYPE html>
<html><head>
<title>build.gradle.kts &#43; buildSrc管理Gradle依赖</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">















  






      <script src="/js/toc.js"></script>
    
    <link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">

<link rel="stylesheet" href="/scss/dark-mode.min.cb53f1bee2b8900cb4f082afbf00175d6618f281cf9a2fe8619e3b52d20b5721.css" integrity="sha256-y1PxvuK4kAy08IKvvwAXXWYY8oHPmi/oYZ47UtILVyE=" media="screen">


<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Material+Icons">



















</head>
<body>
    	<div id="app"><div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Archive
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#buildgradle---buildgradlekts" class="nav-buildgradle---buildgradlekts">
									build.gradle -&gt; build.gradle.kts
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%96%b0%e5%bb%babuildsrc%e6%a8%a1%e5%9d%97" class="nav-新建buildsrc模块">
									新建buildSrc模块
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%96%b0%e5%bb%ba%e7%bb%9f%e4%b8%80%e4%be%9d%e8%b5%96%e7%ae%a1%e7%90%86%e6%96%87%e4%bb%b6" class="nav-新建统一依赖管理文件">
									新建统一依赖管理文件
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://houzixiashanxiedaima.github.io/">
            雅俗共赏
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://houzixiashanxiedaima.github.io/">
        <div class="single-column-header-title">雅俗共赏</div>
        
        <div class="single-column-header-subtitle">Be Water</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    build.gradle.kts &#43; buildSrc管理Gradle依赖
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2020-08-09 11:31
                        </time>
                        

                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/android">Android</a>
                                &nbsp;
                            
                                <a href="/tags/gradle">Gradle</a>
                                &nbsp;
                            
                                <a href="/tags/kotlin">Kotlin</a>
                                &nbsp;
                            
                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            7 min
                            
                            42 s.
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <p>在Android开发过程中，经常需要管理Gradle的依赖，但是传统的Gradle管理方式有几个不好的地方</p>
<ul>
<li>对于多个module支持不太好，无法共用</li>
<li>build.gradle文件中无法使用自动补全</li>
<li>如果某个库在多module中引用，需要改动多个地方</li>
<li>……</li>
</ul>
<p>虽然Google官方推荐使用ext的形式统一管理，但是对于现在大家使用Kotlin越来越多的情况下，是否能够使用Kotlin一门语言统一Android开发。</p>
<!-- raw HTML omitted -->
<p>今天就给大家介绍build.gradle.kts + buildSrc的方式来管理Gradle依赖，这种方式管理Gradle依赖，能够利用Kotlin语言的自动补全，让我们更方便地书写代码。接下来我们就一步步的将<code>build.gradle</code>转化为<code>build.gradle.kts</code></p>
<h3 id="buildgradle---buildgradlekts">build.gradle -&gt; build.gradle.kts</h3>
<p>修改文件名为<code>build.gradle.kts</code></p>
<p><strong>替换单引号为双引号</strong></p>
<p>在gradle语法中，可以用单引号<code>'</code>和双引号<code>&quot;</code>来表示字符串，但是在<code>build.gradle.kts</code>中只能使用双引号表示字符串，所以我们要做的第一步就是将<code>build.gradle</code>文件中所有的单引号转换为双引号，这一步使用Android Studio自带的替换功能即可。</p>
<p>在文件中按下快捷键<code>Ctrl+R</code>，然后输入要查找的单引号，再输入要替换的双引号，点击<code>Replace all</code>，替换完成。</p>
<p><strong>修改gradle语法为kts语法</strong></p>
<ul>
<li>
<p>setting.gradle</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#228b22">//修改前
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>include <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>:app<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>
</span></span><span style="display:flex;"><span>rootProject.name = <span style="color:#cd5555">&#34;BlogTmp&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">//修改后
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>include(<span style="color:#cd5555">&#34;:app&#34;</span>)
</span></span><span style="display:flex;"><span>rootProject.name = <span style="color:#cd5555">&#34;BlogTmp&#34;</span>
</span></span></code></pre></div></li>
<li>
<p>build.gradle(project)</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#228b22">//修改前
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">// Top-level build file where you can add configuration options common to all sub-projects/modules.
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>buildscript {
</span></span><span style="display:flex;"><span>    ext.kotlin_version = <span style="color:#cd5555">&#34;1.3.72&#34;</span>
</span></span><span style="display:flex;"><span>    repositories {
</span></span><span style="display:flex;"><span>        google()
</span></span><span style="display:flex;"><span>        jcenter()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    dependencies {
</span></span><span style="display:flex;"><span>        classpath <span style="color:#cd5555">&#34;com.android.tools.build:gradle:4.0.1&#34;</span>
</span></span><span style="display:flex;"><span>        classpath <span style="color:#cd5555">&#34;org.jetbrains.kotlin:kotlin-gradle-plugin:</span><span style="color:#cd5555">$kotlin</span><span style="color:#cd5555">_version&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// NOTE: Do not place your application dependencies here; they belong
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#228b22">// in the individual module build.gradle files
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>allprojects {
</span></span><span style="display:flex;"><span>    repositories {
</span></span><span style="display:flex;"><span>        google()
</span></span><span style="display:flex;"><span>        jcenter()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>task clean(type: Delete) {
</span></span><span style="display:flex;"><span>    delete rootProject.buildDir
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">//修改后
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">// Top-level build file where you can add configuration options common to all sub-projects/modules.
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>buildscript {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">val</span> kotlin_version = <span style="color:#cd5555">&#34;1.3.72&#34;</span>
</span></span><span style="display:flex;"><span>    repositories {
</span></span><span style="display:flex;"><span>        google()
</span></span><span style="display:flex;"><span>        jcenter()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    dependencies {
</span></span><span style="display:flex;"><span>        classpath (<span style="color:#cd5555">&#34;com.android.tools.build:gradle:4.0.1&#34;</span>)
</span></span><span style="display:flex;"><span>        classpath (<span style="color:#cd5555">&#34;org.jetbrains.kotlin:kotlin-gradle-plugin:</span><span style="color:#cd5555">$kotlin</span><span style="color:#cd5555">_version&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// NOTE: Do not place your application dependencies here; they belong
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#228b22">// in the individual module build.gradle files
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>allprojects {
</span></span><span style="display:flex;"><span>    repositories {
</span></span><span style="display:flex;"><span>        google()
</span></span><span style="display:flex;"><span>        jcenter()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tasks.register(<span style="color:#cd5555">&#34;clean&#34;</span>, Delete::<span style="color:#8b008b;font-weight:bold">class</span>) {
</span></span><span style="display:flex;"><span>    delete(rootProject.buildDir)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>build.gradle(app)</p>
<p>修改前</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>apply plugin: <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>com.android.application<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>
</span></span><span style="display:flex;"><span>apply plugin: <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>kotlin-android<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>
</span></span><span style="display:flex;"><span>apply plugin: <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>kotlin-android-extensions<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>android {
</span></span><span style="display:flex;"><span>    compileSdkVersion <span style="color:#b452cd">29</span>
</span></span><span style="display:flex;"><span>    buildToolsVersion <span style="color:#cd5555">&#34;29.0.3&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    defaultConfig {
</span></span><span style="display:flex;"><span>        applicationId <span style="color:#cd5555">&#34;com.agiao.blogtmp&#34;</span>
</span></span><span style="display:flex;"><span>        minSdkVersion <span style="color:#b452cd">16</span>
</span></span><span style="display:flex;"><span>        targetSdkVersion <span style="color:#b452cd">29</span>
</span></span><span style="display:flex;"><span>        versionCode <span style="color:#b452cd">1</span>
</span></span><span style="display:flex;"><span>        versionName <span style="color:#cd5555">&#34;1.0&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        testInstrumentationRunner <span style="color:#cd5555">&#34;androidx.test.runner.AndroidJUnitRunner&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    buildTypes {
</span></span><span style="display:flex;"><span>        release {
</span></span><span style="display:flex;"><span>            minifyEnabled <span style="color:#8b008b;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>            proguardFiles getDefaultProguardFile(<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>proguard-android-optimize.txt<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>), <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>proguard-rules.pro<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dependencies {
</span></span><span style="display:flex;"><span>    implementation fileTree(dir: <span style="color:#cd5555">&#34;libs&#34;</span>, include: [<span style="color:#cd5555">&#34;*.jar&#34;</span>])
</span></span><span style="display:flex;"><span>    implementation <span style="color:#cd5555">&#34;org.jetbrains.kotlin:kotlin-stdlib:</span><span style="color:#cd5555">$kotlin</span><span style="color:#cd5555">_version&#34;</span>
</span></span><span style="display:flex;"><span>    implementation <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>androidx.core:core-ktx:<span style="color:#b452cd">1.3</span>.<span style="color:#b452cd">1</span><span style="color:#a61717;background-color:#e3d2d2">&#39;</span>
</span></span><span style="display:flex;"><span>    implementation <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>androidx.appcompat:appcompat:<span style="color:#b452cd">1.1</span>.<span style="color:#b452cd">0</span><span style="color:#a61717;background-color:#e3d2d2">&#39;</span>
</span></span><span style="display:flex;"><span>    implementation <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>androidx.constraintlayout:constraintlayout:<span style="color:#b452cd">1.1</span>.<span style="color:#b452cd">3</span><span style="color:#a61717;background-color:#e3d2d2">&#39;</span>
</span></span><span style="display:flex;"><span>    testImplementation <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>junit:junit:<span style="color:#b452cd">4.12</span><span style="color:#a61717;background-color:#e3d2d2">&#39;</span>
</span></span><span style="display:flex;"><span>    androidTestImplementation <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>androidx.test.ext:junit:<span style="color:#b452cd">1.1</span>.<span style="color:#b452cd">1</span><span style="color:#a61717;background-color:#e3d2d2">&#39;</span>
</span></span><span style="display:flex;"><span>    androidTestImplementation <span style="color:#a61717;background-color:#e3d2d2">&#39;</span>androidx.test.espresso:espresso-core:<span style="color:#b452cd">3.2</span>.<span style="color:#b452cd">0</span><span style="color:#a61717;background-color:#e3d2d2">&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>修改后</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>plugins {
</span></span><span style="display:flex;"><span>    id(<span style="color:#cd5555">&#34;com.android.application&#34;</span>)
</span></span><span style="display:flex;"><span>    id(<span style="color:#cd5555">&#34;kotlin-android&#34;</span>)
</span></span><span style="display:flex;"><span>    id(<span style="color:#cd5555">&#34;kotlin-android-extensions&#34;</span>)
</span></span><span style="display:flex;"><span>    id(<span style="color:#cd5555">&#34;kotlin-kapt&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>android {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    compileSdkVersion(<span style="color:#008b45;font-weight:bold">Versions</span>.compileSdkVersion)
</span></span><span style="display:flex;"><span>    buildToolsVersion(<span style="color:#008b45;font-weight:bold">Versions</span>.buildToolsVersion)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    defaultConfig {
</span></span><span style="display:flex;"><span>        applicationId = <span style="color:#008b45;font-weight:bold">Versions</span>.applicationId
</span></span><span style="display:flex;"><span>        minSdkVersion(<span style="color:#008b45;font-weight:bold">Versions</span>.minSdkVersion)
</span></span><span style="display:flex;"><span>        targetSdkVersion(<span style="color:#008b45;font-weight:bold">Versions</span>.targetSdkVersion)
</span></span><span style="display:flex;"><span>        versionCode = <span style="color:#008b45;font-weight:bold">Versions</span>.versionCode
</span></span><span style="display:flex;"><span>        versionName = <span style="color:#008b45;font-weight:bold">Versions</span>.versionName
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        testInstrumentationRunner = <span style="color:#cd5555">&#34;androidx.test.runner.AndroidJUnitRunner&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    buildTypes {
</span></span><span style="display:flex;"><span>        getByName(<span style="color:#008b45;font-weight:bold">BuildType</span>.release) {
</span></span><span style="display:flex;"><span>            isMinifyEnabled = <span style="color:#8b008b;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>            proguardFiles(getDefaultProguardFile(<span style="color:#cd5555">&#34;proguard-android.txt&#34;</span>), <span style="color:#cd5555">&#34;proguard-rules.pro&#34;</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    compileOptions {
</span></span><span style="display:flex;"><span>        sourceCompatibility = <span style="color:#008b45;font-weight:bold">JavaVersion</span>.VERSION_1_8
</span></span><span style="display:flex;"><span>        targetCompatibility = <span style="color:#008b45;font-weight:bold">JavaVersion</span>.VERSION_1_8
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dependencies {
</span></span><span style="display:flex;"><span>    implementation(fileTree(mapOf(<span style="color:#cd5555">&#34;dir&#34;</span> to <span style="color:#cd5555">&#34;libs&#34;</span>, <span style="color:#cd5555">&#34;include&#34;</span> to listOf(<span style="color:#cd5555">&#34;*.jar&#34;</span>))))
</span></span><span style="display:flex;"><span>    implementation(<span style="color:#008b45;font-weight:bold">Dependencies</span>.kotlinStd)
</span></span><span style="display:flex;"><span>    implementation(<span style="color:#008b45;font-weight:bold">Dependencies</span>.coreKTX)
</span></span><span style="display:flex;"><span>    implementation(<span style="color:#008b45;font-weight:bold">Dependencies</span>.constraintLayout)
</span></span><span style="display:flex;"><span>    implementation(<span style="color:#008b45;font-weight:bold">Dependencies</span>.appCompat)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    testImplementation(<span style="color:#008b45;font-weight:bold">Test</span>.junit)
</span></span><span style="display:flex;"><span>    androidTestImplementation(<span style="color:#008b45;font-weight:bold">Test</span>.junitTest)
</span></span><span style="display:flex;"><span>    androidTestImplementation(<span style="color:#008b45;font-weight:bold">Test</span>.espresso)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
<p>修改的几个注意点：</p>
<ul>
<li><code>kts</code>文件中大多都是函数调用，所以需要加上括号，字符串是作为参数传进去的</li>
<li><code>project-build.gradle</code>中的<code>task</code>需要修改为新的写法</li>
<li><code>app-build.gradle</code>中的<code>fileTree</code>需要修改为新的写法</li>
</ul>
<p>在上述的修改中，使用到了<code>Dependencies.appCompat</code>这种调用方式，<code>Dependencies</code>就是我们在buildSrc中定义的统一管理文件。</p>
<h3 id="新建buildsrc模块">新建buildSrc模块</h3>
<p>在Android Studio中，将目录切换为<code>Project</code>，然后新建<code>buildSrc</code>文件夹，在<code>buildSrc</code>文件夹下新建<code>build.gradle.kts</code>文件，然后填入下面的代码，点击<code>sync now</code>进行同步。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>plugins {
</span></span><span style="display:flex;"><span>    <span style="color:#a61717;background-color:#e3d2d2">`</span>kotlin-dsl<span style="color:#a61717;background-color:#e3d2d2">`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>repositories{
</span></span><span style="display:flex;"><span>    jcenter()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>同步完成之后，<code>buildSrc</code>就变成了和<code>app</code>一样的一个<code>module</code>。然后在<code>buildSrc</code>文件夹上右键-新建文件夹-选择<code>src/main/java</code>，接下来就可以将我们的依赖写在该文件下的文件中了。</p>
<h3 id="新建统一依赖管理文件">新建统一依赖管理文件</h3>
<p>在上述的<code>src/main/java</code>文件夹中新建Dependencies.kt文件（文件名可以任意取）</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">object</span> <span style="color:#008b45;font-weight:bold">Dependencies</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> kotlinStd = <span style="color:#cd5555">&#34;org.jetbrains.kotlin:kotlin-stdlib:</span><span style="color:#cd5555">${Versions.kotlinVersion}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> coreKTX = <span style="color:#cd5555">&#34;androidx.core:core-ktx:</span><span style="color:#cd5555">${Versions.coreKTX}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> appCompat = <span style="color:#cd5555">&#34;androidx.appcompat:appcompat:</span><span style="color:#cd5555">${Versions.appCompact}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> constraintLayout =
</span></span><span style="display:flex;"><span>        <span style="color:#cd5555">&#34;androidx.constraintlayout:constraintlayout:</span><span style="color:#cd5555">${Versions.constraintLayout}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> roomRuntime = <span style="color:#cd5555">&#34;androidx.room:room-runtime:</span><span style="color:#cd5555">${Versions.roomVersion}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> roomCompiler = <span style="color:#cd5555">&#34;androidx.room:room-compiler:</span><span style="color:#cd5555">${Versions.roomVersion}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> roomCoroutines = <span style="color:#cd5555">&#34;androidx.room:room-ktx:</span><span style="color:#cd5555">${Versions.roomVersion}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> liveData = <span style="color:#cd5555">&#34;androidx.lifecycle:lifecycle-viewmodel-ktx:</span><span style="color:#cd5555">${Versions.lifeCycleVersion}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> viewModel = <span style="color:#cd5555">&#34;androidx.lifecycle:lifecycle-livedata-ktx:</span><span style="color:#cd5555">${Versions.lifeCycleVersion}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> lifeCycleCompiler =
</span></span><span style="display:flex;"><span>        <span style="color:#cd5555">&#34;androidx.lifecycle:lifecycle-compiler:</span><span style="color:#cd5555">${Versions.lifeCycleVersion}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> material = <span style="color:#cd5555">&#34;com.google.android.material:material:</span><span style="color:#cd5555">${Versions.materialVersion}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">object</span> <span style="color:#008b45;font-weight:bold">Versions</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> compileSdkVersion = <span style="color:#b452cd">29</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> buildToolsVersion = <span style="color:#cd5555">&#34;29.0.3&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> applicationId = <span style="color:#cd5555">&#34;com.agiao.blogtmp&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> minSdkVersion = <span style="color:#b452cd">16</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> targetSdkVersion = <span style="color:#b452cd">29</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> versionCode = <span style="color:#b452cd">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> versionName = <span style="color:#cd5555">&#34;1.0&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> kotlinVersion = <span style="color:#cd5555">&#34;1.3.72&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> coreKTX = <span style="color:#cd5555">&#34;1.3.0&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> appCompact = <span style="color:#cd5555">&#34;1.1.0&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> constraintLayout = <span style="color:#cd5555">&#34;2.0.0-rc1&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> roomVersion = <span style="color:#cd5555">&#34;2.2.5&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> lifeCycleVersion = <span style="color:#cd5555">&#34;2.2.0&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> materialVersion = <span style="color:#cd5555">&#34;1.1.0&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> junit = <span style="color:#cd5555">&#34;4.12&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> junitTest = <span style="color:#cd5555">&#34;1.1.1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> espresso = <span style="color:#cd5555">&#34;3.2.0&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">object</span> <span style="color:#008b45;font-weight:bold">Test</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> testRoom = <span style="color:#cd5555">&#34;androidx.room:room-testing:</span><span style="color:#cd5555">${Versions.roomVersion}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> junit = <span style="color:#cd5555">&#34;junit:junit:</span><span style="color:#cd5555">${Versions.junit}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> junitTest = <span style="color:#cd5555">&#34;androidx.test.ext:junit:</span><span style="color:#cd5555">${Versions.junitTest}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> espresso = <span style="color:#cd5555">&#34;androidx.test.espresso:espresso-core:</span><span style="color:#cd5555">${Versions.espresso}</span><span style="color:#cd5555">&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">object</span> <span style="color:#008b45;font-weight:bold">BuildType</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> release = <span style="color:#cd5555">&#34;release&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">val</span> debug = <span style="color:#cd5555">&#34;debug&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>上述的依赖库可以根据自己的需要调整，也可以把每个<code>object</code>都提取为单独的文件，这部分就是根据个人喜好自己调整。</p>
<p>至此，我们的<code>build.gradle</code>就完全改造完成了。现在就可以在<code>build.gradle.kts</code>中使用Kotlin的语法进行依赖导入了，同时还能使用Kotlin的自动补全功能，更方便的管理和导入依赖了。</p>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">最后修改于 2020-08-09</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="/posts/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/">
			下回<br>开发环境配置
                </a>
                
                
                
                <a class="older-posts" href="/posts/alertdialog%E4%B8%AD%E4%BD%BF%E7%94%A8webview%E6%98%BE%E7%A4%BA%E5%86%85%E5%AE%B9/">
			上回<br>AlertDialog中使用WebView显示内容
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                












            </div>
        </div>
    </div>


                    </div>
            </div><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://houzixiashanxiedaima.github.io/">
    
        <div class="nav-title">
            雅俗共赏
        </div>
        
        <div class="nav-subtitle">
            Be Water
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Archive
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	2024 雅俗共赏
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    <div class="toc-wrapper">
        

        
        <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#buildgradle---buildgradlekts" class="nav-buildgradle---buildgradlekts">
									build.gradle -&gt; build.gradle.kts
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%96%b0%e5%bb%babuildsrc%e6%a8%a1%e5%9d%97" class="nav-新建buildsrc模块">
									新建buildSrc模块
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%96%b0%e5%bb%ba%e7%bb%9f%e4%b8%80%e4%be%9d%e8%b5%96%e7%ae%a1%e7%90%86%e6%96%87%e4%bb%b6" class="nav-新建统一依赖管理文件">
									新建统一依赖管理文件
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
        
    </div>
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top"
            :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	2024 雅俗共赏
	
</div>
            </div>
    
    <script src="/js/journal.js"></script></body>
</html>
