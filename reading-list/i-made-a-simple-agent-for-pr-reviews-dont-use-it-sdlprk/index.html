<!DOCTYPE html><html lang="zh-CN" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.16.1"><meta name="description" content="Reviewbot is eternal, yet also very cooked."><link rel="canonical" href="https://blog.yuyins.com/reading-list/i-made-a-simple-agent-for-pr-reviews-dont-use-it-sdlprk/"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://blog.yuyins.com/reading-list/i-made-a-simple-agent-for-pr-reviews-dont-use-it-sdlprk/"><meta property="og:title" content="I made a simple agent for PR reviews. Don't use it."><meta property="og:description" content="Reviewbot is eternal, yet also very cooked."><meta property="og:image" content="https://blog.yuyins.com/favicon.svg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://blog.yuyins.com/reading-list/i-made-a-simple-agent-for-pr-reviews-dont-use-it-sdlprk/"><meta property="twitter:title" content="I made a simple agent for PR reviews. Don't use it."><meta property="twitter:description" content="Reviewbot is eternal, yet also very cooked."><meta property="twitter:image" content="https://blog.yuyins.com/favicon.svg"><title>I made a simple agent for PR reviews. Don&#39;t use it.</title><!-- Theme and color scheme script (runs before page loads to prevent flash) --><script>
			// 初始化配色方案 - 默认使用 stone-amber
			const colorScheme = localStorage.getItem('colorScheme') || 'stone-amber';
			document.documentElement.setAttribute('data-color', colorScheme);

			// 强制使用浅色主题
			document.documentElement.setAttribute('data-theme', 'light');
		</script><link rel="stylesheet" href="/_astro/_slug_.C-G01a-E.css">
<style>.blog-post-container[data-astro-cid-wrgicudb]{width:100%;margin:0 auto;padding:2rem 0}.blog-post[data-astro-cid-wrgicudb]{width:100%;min-width:0;max-width:42rem;margin:0 auto}.article-header[data-astro-cid-wrgicudb]{margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--border)}.article-header[data-astro-cid-wrgicudb] h1[data-astro-cid-wrgicudb]{font-size:2rem;line-height:1.3;margin-bottom:1rem;font-weight:700;color:var(--foreground);word-break:break-word}.article-meta[data-astro-cid-wrgicudb]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:var(--muted-foreground)}.source-tag[data-astro-cid-wrgicudb]{background-color:var(--muted);color:var(--foreground);padding:.125rem .5rem;border-radius:9999px;font-weight:500;font-size:.75rem;text-decoration:none;transition:opacity .2s}.source-tag[data-astro-cid-wrgicudb]:hover{opacity:.8}.separator[data-astro-cid-wrgicudb]{color:var(--border)}.article-content[data-astro-cid-wrgicudb]{line-height:1.8;margin-bottom:3rem;font-size:1.0625rem;color:var(--foreground)}.article-content[data-astro-cid-wrgicudb] h2{margin-top:2rem;margin-bottom:1rem;font-size:1.5rem;font-weight:600}.article-content[data-astro-cid-wrgicudb] h3{margin-top:1.5rem;margin-bottom:.75rem;font-size:1.25rem;font-weight:600}.article-content[data-astro-cid-wrgicudb] p{margin-bottom:1.25rem}.article-content[data-astro-cid-wrgicudb] a{color:var(--accent);text-decoration:underline;text-underline-offset:2px}.article-content[data-astro-cid-wrgicudb] img{max-width:100%;height:auto;border-radius:.5rem;margin:1.5rem 0}.article-content[data-astro-cid-wrgicudb] blockquote{border-left:4px solid var(--border);padding-left:1rem;margin:1.5rem 0;color:var(--muted-foreground);font-style:italic}.article-content[data-astro-cid-wrgicudb] pre{background:var(--muted);padding:1rem;border-radius:.5rem;overflow-x:auto;font-family:monospace;margin:1.5rem 0}.article-content[data-astro-cid-wrgicudb] ul,.article-content[data-astro-cid-wrgicudb] ol{padding-left:1.5rem;margin-bottom:1.25rem}.article-content[data-astro-cid-wrgicudb] li{margin-bottom:.5rem}.article-footer[data-astro-cid-wrgicudb]{padding-top:2rem;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:1.5rem;align-items:center}.action-row[data-astro-cid-wrgicudb]{display:flex;justify-content:center}.read-original-btn[data-astro-cid-wrgicudb]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background-color:var(--foreground);color:var(--background);border-radius:.5rem;font-weight:500;text-decoration:none;transition:opacity .2s}.read-original-btn[data-astro-cid-wrgicudb]:hover{opacity:.9}.back-to-list[data-astro-cid-wrgicudb]{text-align:center}.back-link[data-astro-cid-wrgicudb]{color:var(--muted-foreground);text-decoration:none;font-size:.875rem;transition:color .2s}.back-link[data-astro-cid-wrgicudb]:hover{color:var(--foreground)}
</style></head> <body data-astro-cid-sckkx6r4> <a id="skip-to-content" href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-accent focus:text-background" data-astro-cid-sckkx6r4>Skip to content</a> <header class="header" data-astro-cid-3ef6ksr2> <nav class="header-nav" aria-label="Main navigation" data-astro-cid-3ef6ksr2> <a href="/" class="header-logo" data-astro-cid-3ef6ksr2>
AstroBlog
</a> <div class="header-links" data-astro-cid-3ef6ksr2> <ul class="nav-list" data-astro-cid-3ef6ksr2> <li data-astro-cid-3ef6ksr2> <a href="/" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 文章 </a> </li><li data-astro-cid-3ef6ksr2> <a href="/category" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 分类 </a> </li><li data-astro-cid-3ef6ksr2> <a href="/reading-list" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 订阅 </a> </li><li data-astro-cid-3ef6ksr2> <a href="/about" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 关于 </a> </li> </ul> <div class="header-actions" data-astro-cid-3ef6ksr2> <div id="search" data-astro-cid-otpdt6jm> <button id="search-button" class="search-toggle" aria-label="打开搜索" title="搜索 (⌘K)" data-astro-cid-otpdt6jm> <svg class="search-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-otpdt6jm> <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-astro-cid-otpdt6jm></circle> <path d="M20 20L16.5 16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-astro-cid-otpdt6jm></path> </svg> </button> <dialog id="search-dialog" class="search-modal" data-astro-cid-otpdt6jm> <div class="modal-content" data-astro-cid-otpdt6jm> <div class="modal-header" data-astro-cid-otpdt6jm> <h2 class="modal-title" data-astro-cid-otpdt6jm>搜索文章</h2> <button id="close-search" class="close-button" aria-label="关闭搜索" data-astro-cid-otpdt6jm> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-otpdt6jm> <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-otpdt6jm></path> </svg> </button> </div> <div id="pagefind-ui" data-astro-cid-otpdt6jm></div> </div> </dialog> </div> <script type="module">let d=!1;const c="pagefind-loaded";async function l(t=0){if(sessionStorage.getItem(c)==="true")return g(),!0;const r=document.getElementById("pagefind-ui");if(!r)return!1;r.innerHTML='<div style="padding: 2rem; text-align: center; color: var(--muted-foreground);">加载中...</div>';try{return await new Promise((o,s)=>{const a=document.createElement("script");a.src="/pagefind/pagefind-ui.js",a.onload=o,a.onerror=s,document.head.appendChild(a)}),g(),sessionStorage.setItem(c,"true"),!0}catch(i){return console.error("Failed to load search:",i),t<2?(console.log(`Retrying search load... (${t+1}/2)`),await new Promise(o=>setTimeout(o,1e3)),l(t+1)):(r&&(r.innerHTML=`
          <div style="padding: 2rem; text-align: center;">
            <p style="color: var(--muted-foreground); margin-bottom: 1rem;">搜索功能加载失败</p>
            <button id="retry-search" style="padding: 0.5rem 1rem; background: var(--accent); color: var(--accent-foreground); border: none; border-radius: 0.375rem; cursor: pointer;">
              重试
            </button>
          </div>
        `,document.getElementById("retry-search")?.addEventListener("click",()=>{sessionStorage.removeItem(c),l(0)})),!1)}}function g(){typeof PagefindUI<"u"&&(new PagefindUI({element:"#pagefind-ui",showSubResults:!0,showImages:!1,excerptLength:15,translations:{placeholder:"搜索文章...",clear_search:"清除",load_more:"加载更多",search_label:"搜索此站点",filters_label:"筛选",zero_results:"未找到结果 [SEARCH_TERM]",many_results:"找到 [COUNT] 个结果 [SEARCH_TERM]",one_result:"找到 [COUNT] 个结果 [SEARCH_TERM]",alt_search:"未找到 [SEARCH_TERM] 的结果。显示 [DIFFERENT_TERM] 的结果",search_suggestion:"未找到 [SEARCH_TERM] 的结果。尝试以下搜索：",searching:"搜索中 [SEARCH_TERM]..."}}),setTimeout(()=>{const t=document.querySelector(".pagefind-ui__search-input");t instanceof HTMLElement&&t.focus()},100))}function u(){if(d)return;d=!0;const t=document.getElementById("search-button"),n=document.getElementById("search-dialog"),r=document.getElementById("close-search");if(!t||!n||!r)return;let i=sessionStorage.getItem(c)==="true";const o=async()=>{n.showModal(),document.body.style.overflow="hidden",i?setTimeout(()=>{const e=document.querySelector(".pagefind-ui__search-input");e instanceof HTMLElement&&e.focus()},100):await l()&&(i=!0)},s=()=>{n.close(),document.body.style.overflow=""},a=e=>{e.target===n&&s()},m=e=>{e.key==="Escape"&&n.open&&s()},f=e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),n.open?s():o())};t.addEventListener("click",o),r.addEventListener("click",s),n.addEventListener("click",a),document.addEventListener("keydown",m),document.addEventListener("keydown",f),document.addEventListener("astro:before-swap",()=>{t.removeEventListener("click",o),r.removeEventListener("click",s),n.removeEventListener("click",a),document.removeEventListener("keydown",m),document.removeEventListener("keydown",f),d=!1},{once:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();document.addEventListener("astro:page-load",u);</script> <link href="/pagefind/pagefind-ui.css" rel="stylesheet">  </div> </div> </nav> </header>  <main id="main-content" data-pagefind-body class="main-content main-content--wide" data-astro-cid-sckkx6r4>  <div class="blog-post-container" data-astro-cid-wrgicudb> <article class="blog-post" data-astro-cid-wrgicudb> <header class="article-header" data-astro-cid-wrgicudb> <h1 data-astro-cid-wrgicudb>I made a simple agent for PR reviews. Don&#39;t use it.</h1> <div class="article-meta" data-astro-cid-wrgicudb> <a href="https://xeiaso.net" target="_blank" rel="noopener noreferrer" class="source-tag" data-astro-cid-wrgicudb>xeiaso.net</a> <span class="separator" data-astro-cid-wrgicudb>·</span> <time data-astro-cid-wrgicudb>2026年1月11日</time> </div> </header> <!-- Render HTML content from RSS feed --> <div class="article-content app-prose" data-astro-cid-wrgicudb>
        <p>My coworkers really like AI-powered code review tools and it seems that every time I make a pull request in one of their repos I learn about yet another AI code review SaaS product. Given that there are so many of them, I decided to see how easy it would be to develop my own AI-powered code review bot that targets GitHub repositories. I managed to hack out the core of it in a single afternoon using a model that runs on my desk. I've ended up with a little tool I call <a href="https://github.com/Xe/x/tree/master/cmd/reviewbot">reviewbot</a> that takes GitHub pull request information and submits code reviews in response.</p>
        <p>reviewbot is powered by a <a href="https://xeiaso.net/blog/2025/dgx-spark-first-look/">DGX Spark</a>, <a href="https://github.com/ggml-org/llama.cpp">llama.cpp</a>, and OpenAI's <a href="https://openai.com/index/introducing-gpt-oss/">GPT-OSS 120b</a>. The AI model runs on my desk with a machine that pulls less power doing AI inference than my gaming tower pulls running fairly lightweight 3D games. In testing I've found that nearly all runs of reviewbot take less than two minutes, even at a rate of only 60 tokens per second generated by the DGX Spark.</p>
        <p>reviewbot is about 350 lines of Go that just feeds pull request information into the context window of the model and provides a few tools for actions like &quot;leave pull request review&quot; and &quot;read contents of file&quot;. I'm considering adding other actions like &quot;read messages in thread&quot; or &quot;read contents of issue&quot;, but I haven't needed them yet.</p>
        <p>To make my life easier, I distribute it as <a href="https://github.com/Xe/x/pkgs/container/x%2Freviewbot">a Docker image</a> that <a href="https://github.com/Xe/x/blob/master/cmd/reviewbot/actions/reviewbot-manually-invoked.yaml">gets run in GitHub Actions</a> whenever a pull review comment includes the magic phrase <code>/reviewbot</code>.</p>
        <p>The main reason I made reviewbot is that I couldn't find anything like it that let you specify the combination of:</p>
        <ul>
        <li>Your own AI model name</li>
        <li>Your own AI model provider URL</li>
        <li>Your own AI model provider API token</li>
        </ul>
        <p>I'm fairly sure that there are thousands of similar AI-powered tools on the market that I can't find because Google is a broken tool, but this one is mine.</p>
        <h2>How it works</h2>
        <p>When reviewbot reviews a pull request, it assembles an AI model prompt like this:</p>
        <pre class="language-text"><code class="language-text code-highlight"><span class="code-line">Pull request info:
        </span><span class="code-line">
        </span><span class="code-line">&lt;pr>
        </span><span class="code-line">&lt;title>Pull request title&lt;/title>
        </span><span class="code-line">&lt;author>GitHub username of pull request author&lt;/author>
        </span><span class="code-line">&lt;body>
        </span><span class="code-line">Text body of the pull request
        </span><span class="code-line">&lt;/body>
        </span><span class="code-line">&lt;/pr>
        </span><span class="code-line">
        </span><span class="code-line">Commits:
        </span><span class="code-line">
        </span><span class="code-line">&lt;commits>
        </span><span class="code-line">&lt;commit>
        </span><span class="code-line">&lt;author>Xe&lt;/author>
        </span><span class="code-line">&lt;message>
        </span><span class="code-line">chore: minor formatting and cleanup fixes
        </span><span class="code-line">
        </span><span class="code-line">- Format .mcp.json with prettier
        </span><span class="code-line">- Minor whitespace cleanup
        </span><span class="code-line">
        </span><span class="code-line">Assisted-by: GLM 4.7 via Claude Code
        </span><span class="code-line">Reviewbot-request: yes
        </span><span class="code-line">Signed-off-by: Xe Iaso &lt;me@xeiaso.net>
        </span><span class="code-line">&lt;/message>
        </span><span class="code-line">&lt;/commit>
        </span><span class="code-line">&lt;/commits>
        </span><span class="code-line">
        </span><span class="code-line">Files changed:
        </span><span class="code-line">
        </span><span class="code-line">&lt;files>
        </span><span class="code-line">&lt;file>
        </span><span class="code-line">&lt;name>.mcp.json&lt;/name>
        </span><span class="code-line">&lt;status>modified&lt;/status>
        </span><span class="code-line">&lt;patch>
        </span><span class="code-line">@@ -3,11 +3,8 @@
        </span><span class="code-line">     &quot;python&quot;: {
        </span><span class="code-line">       &quot;type&quot;: &quot;stdio&quot;,
        </span><span class="code-line">       &quot;command&quot;: &quot;go&quot;,
        </span><span class="code-line">-      &quot;args&quot;: [
        </span><span class="code-line">-        &quot;run&quot;,
        </span><span class="code-line">-        &quot;./cmd/python-wasm-mcp&quot;
        </span><span class="code-line">-      ],
        </span><span class="code-line">+      &quot;args&quot;: [&quot;run&quot;, &quot;./cmd/python-wasm-mcp&quot;],
        </span><span class="code-line">       &quot;env&quot;: {}
        </span><span class="code-line">     }
        </span><span class="code-line">   }
        </span><span class="code-line">-}
        </span><span class="code-line">\ No newline at end of file
        </span><span class="code-line">+}
        </span><span class="code-line">&lt;/patch>
        </span><span class="code-line">&lt;/file>
        </span><span class="code-line">&lt;/files>
        </span><span class="code-line">
        </span><span class="code-line">Agent information:
        </span><span class="code-line">
        </span><span class="code-line">&lt;agentInfo>
        </span><span class="code-line">[contents of AGENTS.d in the repository]
        </span><span class="code-line">&lt;/agentInfo>
        </span></code></pre>
        <p>The AI model can return one of three results:</p>
        <ul>
        <li>Definite approval via the <code>submit_review</code> tool that approves the changes with a summary of the changes made to the code.</li>
        <li>Definite rejection via the <code>submit_review</code> tool that rejects the changes with a summary of the reason why they're being rejected.</li>
        <li>Comments without approving or rejecting the code.</li>
        </ul>
        <p>The core of reviewbot is the &quot;AI agent loop&quot;, or a loop that works like this:</p>
        <ul>
        <li>Collect information to feed into the AI model</li>
        <li>Submit information to AI model</li>
        <li>If the AI model runs the <code>submit_review</code> tool, publish the results and exit.</li>
        <li>If the AI model runs any other tool, collect the information it's requesting and add it to the list of things to submit to the AI model in the next loop.</li>
        <li>If the AI model just returns text at any point, treat that as a noncommittal comment about the changes.</li>
        </ul>
        <h2>Don't use reviewbot</h2>
        <p>reviewbot is a hack that probably works well enough for me. It has a number of limitations including but not limited to:</p>
        <ul>
        <li>It does not work with closed source repositories due to the <a href="https://pkg.go.dev/rsc.io/gitfs">gitfs</a> library not supporting cloning repositories that require authentication. Could probably fix that with some elbow grease if I'm paid enough to do so.</li>
        <li>A fair number of test invocations had the agent rely on unpopulated fields from the GitHub API, which caused crashes. I am certain that I will only find more such examples and need to issue patches for them.</li>
        <li>reviewbot is like 300 lines of Go hacked up by hand in an afternoon. If you really need something like this, you can likely write one yourself with little effort.</li>
        </ul>
        <h2>Frequently asked questions</h2>
        <p>When such an innovation as reviewbot comes to pass, people naturally have questions. In order to give you the best reading experience, I asked my friends, patrons, and loved ones for their questions about reviewbot. Here are some answers that may or may not help:</p>
        <h3>Does the world really need another AI agent?</h3>
        <p>Probably not! This is something I made out of curiosity, not something I made for you to actually use. It was a lot easier to make than I expected and is surprisingly useful for how little effort was put into it.</p>
        <h3>Is there a theme of FAQ questions that you're looking for?</h3>
        <p>Nope. Pure chaos. Let it all happen in a glorious way.</p>
        <h3>Where do we go when we die?</h3>
        <p>How the fuck should I know? I don't even know if chairs exist.</p>
        <h3>Has anyone ever really been far even as decided to use even go want to do look more like?</h3>
        <p>At least half as much I have wanted to use go wish for that. It's just common sense, really.</p>
        <h3>If you have a pile of sand and take away one grain at a time, when does it stop being a pile?</h3>
        <p>When the wind can blow all the sand away.</p>
        <h3>How often does it require oatmeal?</h3>
        <p>Three times daily or the netherbeast will emerge and doom all of society. We don't really want that to happen so we make sure to feed reviewbot its oatmeal.</p>
        <h3>How many pancakes does it take to shingle a dog house?</h3>
        <p>At least twelve. Not sure because I ran out of pancakes.</p>
        <h3>Will this crush my enemies, have them fall at my feet, their horses and goods taken?</h3>
        <p>Only if you add that functionality in a pull request. reviewbot can do anything as long as its code is extended to do that thing.</p>
        <h3>Why should I use reviewbot?</h3>
        <p>Frankly, you shouldn't.</p>
      </div> <footer class="article-footer" data-astro-cid-wrgicudb> <div class="action-row" data-astro-cid-wrgicudb> <a href="https://xeiaso.net/blog/2026/reviewbot/" target="_blank" rel="noopener noreferrer" class="read-original-btn" data-astro-cid-wrgicudb>
阅读原文 ↗
</a> </div> <div class="back-to-list" data-astro-cid-wrgicudb> <a href="/reading-list" class="back-link" data-astro-cid-wrgicudb>← 返回订阅列表</a> </div> </footer> </article> </div>  </main> <footer class="site-footer" aria-label="Site footer" data-astro-cid-sz7xmlte> <div class="footer-content" data-astro-cid-sz7xmlte> <p class="footer-text" data-astro-cid-sz7xmlte>
&copy; 2026 AstroBlog
</p> <p class="footer-text" data-astro-cid-sz7xmlte>
Built with  <a href="https://astro.build/" target="_blank" rel="noopener noreferrer" class="footer-link" data-astro-cid-sz7xmlte>
Astro
</a> </p> </div> </footer>  </body></html> 