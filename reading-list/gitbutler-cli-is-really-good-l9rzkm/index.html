<!DOCTYPE html><html lang="zh-CN" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.17.1"><meta name="description" content="我的工作流程在过去十多年间基本保持稳定。所有文字编辑都使用此处配置的Vim完成，并在该配置的tmux环境下运行Vim进行文稿编写。"><meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self'; font-src 'self' data:;"><link rel="canonical" href="https://blog.yuyins.com/reading-list/gitbutler-cli-is-really-good-l9rzkm/"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://blog.yuyins.com/reading-list/gitbutler-cli-is-really-good-l9rzkm/"><meta property="og:title" content="GitButler命令行工具表现卓越"><meta property="og:description" content="我的工作流程在过去十多年间基本保持稳定。所有文字编辑都使用此处配置的Vim完成，并在该配置的tmux环境下运行Vim进行文稿编写。"><meta property="og:image" content="https://blog.yuyins.com/favicon.svg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://blog.yuyins.com/reading-list/gitbutler-cli-is-really-good-l9rzkm/"><meta property="twitter:title" content="GitButler命令行工具表现卓越"><meta property="twitter:description" content="我的工作流程在过去十多年间基本保持稳定。所有文字编辑都使用此处配置的Vim完成，并在该配置的tmux环境下运行Vim进行文稿编写。"><meta property="twitter:image" content="https://blog.yuyins.com/favicon.svg"><title>GitButler命令行工具表现卓越</title><!-- Theme and color scheme script (runs before page loads to prevent flash) --><script>
			// 初始化配色方案 - 默认使用 stone-amber
			const colorScheme = localStorage.getItem('colorScheme') || 'stone-amber';
			document.documentElement.setAttribute('data-color', colorScheme);

			// 强制使用浅色主题
			document.documentElement.setAttribute('data-theme', 'light');
		</script><link rel="stylesheet" href="/_astro/_slug_.CSpyZhxd.css">
<style>.blog-post-container[data-astro-cid-wrgicudb]{width:100%;margin:0 auto;padding:2rem 0}.blog-post[data-astro-cid-wrgicudb]{width:100%;min-width:0;max-width:42rem;margin:0 auto}.article-header[data-astro-cid-wrgicudb]{margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--border)}.article-header[data-astro-cid-wrgicudb] h1[data-astro-cid-wrgicudb]{font-size:2rem;line-height:1.3;margin-bottom:1rem;font-weight:700;color:var(--foreground);word-break:break-word}.article-meta[data-astro-cid-wrgicudb]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:var(--muted-foreground)}.source-tag[data-astro-cid-wrgicudb]{background-color:var(--muted);color:var(--foreground);padding:.125rem .5rem;border-radius:9999px;font-weight:500;font-size:.75rem;text-decoration:none;transition:opacity .2s}.source-tag[data-astro-cid-wrgicudb]:hover{opacity:.8}.separator[data-astro-cid-wrgicudb]{color:var(--border)}.article-content[data-astro-cid-wrgicudb]{line-height:1.8;margin-bottom:3rem;font-size:1.0625rem;color:var(--foreground)}.article-content[data-astro-cid-wrgicudb] h2{margin-top:2rem;margin-bottom:1rem;font-size:1.5rem;font-weight:600}.article-content[data-astro-cid-wrgicudb] h3{margin-top:1.5rem;margin-bottom:.75rem;font-size:1.25rem;font-weight:600}.article-content[data-astro-cid-wrgicudb] p{margin-bottom:1.25rem}.article-content[data-astro-cid-wrgicudb] a{color:var(--accent);text-decoration:underline;text-underline-offset:2px}.article-content[data-astro-cid-wrgicudb] img{max-width:100%;height:auto;border-radius:.5rem;margin:1.5rem 0}.article-content[data-astro-cid-wrgicudb] blockquote{border-left:4px solid var(--border);padding-left:1rem;margin:1.5rem 0;color:var(--muted-foreground);font-style:italic}.article-content[data-astro-cid-wrgicudb] pre{background:var(--muted);padding:1rem;border-radius:.5rem;overflow-x:auto;font-family:monospace;margin:1.5rem 0}.article-content[data-astro-cid-wrgicudb] ul,.article-content[data-astro-cid-wrgicudb] ol{padding-left:1.5rem;margin-bottom:1.25rem}.article-content[data-astro-cid-wrgicudb] li{margin-bottom:.5rem}.article-footer[data-astro-cid-wrgicudb]{padding-top:2rem;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:1.5rem;align-items:center}.action-row[data-astro-cid-wrgicudb]{display:flex;justify-content:center}.read-original-btn[data-astro-cid-wrgicudb]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background-color:var(--foreground);color:var(--background);border-radius:.5rem;font-weight:500;text-decoration:none;transition:opacity .2s}.read-original-btn[data-astro-cid-wrgicudb]:hover{opacity:.9}.back-to-list[data-astro-cid-wrgicudb]{text-align:center}.back-link[data-astro-cid-wrgicudb]{color:var(--muted-foreground);text-decoration:none;font-size:.875rem;transition:color .2s}.back-link[data-astro-cid-wrgicudb]:hover{color:var(--foreground)}
</style></head> <body data-astro-cid-sckkx6r4> <a id="skip-to-content" href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-accent focus:text-background" data-astro-cid-sckkx6r4>Skip to content</a> <header class="header" data-astro-cid-3ef6ksr2> <nav class="header-nav" aria-label="Main navigation" data-astro-cid-3ef6ksr2> <a href="/" class="header-logo" data-astro-cid-3ef6ksr2>
AstroBlog
</a> <div class="header-links" data-astro-cid-3ef6ksr2> <ul class="nav-list" data-astro-cid-3ef6ksr2> <li data-astro-cid-3ef6ksr2> <a href="/" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 文章 </a> </li><li data-astro-cid-3ef6ksr2> <a href="/category" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 分类 </a> </li><li data-astro-cid-3ef6ksr2> <a href="/reading-list" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 订阅 </a> </li><li data-astro-cid-3ef6ksr2> <a href="/about" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 关于 </a> </li> </ul> <div class="header-actions" data-astro-cid-3ef6ksr2> <div id="search" data-astro-cid-otpdt6jm> <button id="search-button" class="search-toggle" aria-label="打开搜索" title="搜索 (⌘K)" data-astro-cid-otpdt6jm> <svg class="search-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-otpdt6jm> <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-astro-cid-otpdt6jm></circle> <path d="M20 20L16.5 16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-astro-cid-otpdt6jm></path> </svg> </button> <dialog id="search-dialog" class="search-modal" data-astro-cid-otpdt6jm> <div class="modal-content" data-astro-cid-otpdt6jm> <div class="modal-header" data-astro-cid-otpdt6jm> <h2 class="modal-title" data-astro-cid-otpdt6jm>搜索文章</h2> <button id="close-search" class="close-button" aria-label="关闭搜索" data-astro-cid-otpdt6jm> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-otpdt6jm> <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-otpdt6jm></path> </svg> </button> </div> <div id="pagefind-ui" data-astro-cid-otpdt6jm></div> </div> </dialog> </div> <script type="module">let d=!1;const c="pagefind-loaded";async function l(t=0){if(sessionStorage.getItem(c)==="true")return g(),!0;const r=document.getElementById("pagefind-ui");if(!r)return!1;r.innerHTML='<div style="padding: 2rem; text-align: center; color: var(--muted-foreground);">加载中...</div>';try{return await new Promise((o,s)=>{const a=document.createElement("script");a.src="/pagefind/pagefind-ui.js",a.onload=o,a.onerror=s,document.head.appendChild(a)}),g(),sessionStorage.setItem(c,"true"),!0}catch(i){return console.error("Failed to load search:",i),t<2?(console.log(`Retrying search load... (${t+1}/2)`),await new Promise(o=>setTimeout(o,1e3)),l(t+1)):(r&&(r.innerHTML=`
          <div style="padding: 2rem; text-align: center;">
            <p style="color: var(--muted-foreground); margin-bottom: 1rem;">搜索功能加载失败</p>
            <button id="retry-search" style="padding: 0.5rem 1rem; background: var(--accent); color: var(--accent-foreground); border: none; border-radius: 0.375rem; cursor: pointer;">
              重试
            </button>
          </div>
        `,document.getElementById("retry-search")?.addEventListener("click",()=>{sessionStorage.removeItem(c),l(0)})),!1)}}function g(){typeof PagefindUI<"u"&&(new PagefindUI({element:"#pagefind-ui",showSubResults:!0,showImages:!1,excerptLength:15,translations:{placeholder:"搜索文章...",clear_search:"清除",load_more:"加载更多",search_label:"搜索此站点",filters_label:"筛选",zero_results:"未找到结果 [SEARCH_TERM]",many_results:"找到 [COUNT] 个结果 [SEARCH_TERM]",one_result:"找到 [COUNT] 个结果 [SEARCH_TERM]",alt_search:"未找到 [SEARCH_TERM] 的结果。显示 [DIFFERENT_TERM] 的结果",search_suggestion:"未找到 [SEARCH_TERM] 的结果。尝试以下搜索：",searching:"搜索中 [SEARCH_TERM]..."}}),setTimeout(()=>{const t=document.querySelector(".pagefind-ui__search-input");t instanceof HTMLElement&&t.focus()},100))}function u(){if(d)return;d=!0;const t=document.getElementById("search-button"),n=document.getElementById("search-dialog"),r=document.getElementById("close-search");if(!t||!n||!r)return;let i=sessionStorage.getItem(c)==="true";const o=async()=>{n.showModal(),document.body.style.overflow="hidden",i?setTimeout(()=>{const e=document.querySelector(".pagefind-ui__search-input");e instanceof HTMLElement&&e.focus()},100):await l()&&(i=!0)},s=()=>{n.close(),document.body.style.overflow=""},a=e=>{e.target===n&&s()},m=e=>{e.key==="Escape"&&n.open&&s()},f=e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),n.open?s():o())};t.addEventListener("click",o),r.addEventListener("click",s),n.addEventListener("click",a),document.addEventListener("keydown",m),document.addEventListener("keydown",f),document.addEventListener("astro:before-swap",()=>{t.removeEventListener("click",o),r.removeEventListener("click",s),n.removeEventListener("click",a),document.removeEventListener("keydown",m),document.removeEventListener("keydown",f),d=!1},{once:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();document.addEventListener("astro:page-load",u);</script> <link href="/pagefind/pagefind-ui.css" rel="stylesheet">  </div> </div> </nav> </header>  <main id="main-content" data-pagefind-body class="main-content main-content--wide" data-astro-cid-sckkx6r4>  <div class="blog-post-container" data-astro-cid-wrgicudb> <article class="blog-post" data-astro-cid-wrgicudb> <header class="article-header" data-astro-cid-wrgicudb> <h1 data-astro-cid-wrgicudb>GitButler命令行工具表现卓越</h1> <div class="article-meta" data-astro-cid-wrgicudb> <a href="https://matduggan.com" target="_blank" rel="noopener noreferrer" class="source-tag" data-astro-cid-wrgicudb>matduggan.com</a> <span class="separator" data-astro-cid-wrgicudb>·</span> <time data-astro-cid-wrgicudb>2026年2月9日</time> </div> </header> <!-- 使用清洗后的安全 HTML 内容 --> <div class="article-content app-prose" data-astro-cid-wrgicudb><p>My workflow has remained mostly the same for over a decade. I write everything in Vim using the configuration found <a href="https://github.com/braintreeps/vim_dotfiles" rel="noopener noreferrer" target="_blank">here</a>. I run Vim from inside of tmux with a configuration found <a href="https://github.com/braintreeps/vim_dotfiles/blob/master/tmux_example.conf" rel="noopener noreferrer" target="_blank">here</a>. I write things on a git branch, made with the <code>git</code> CLI, then I add them with <code>git add --patch</code> to that branch, trying to run all of the possible linting and tests with <code>git hooks</code> before I waste my time on GitHub Actions. Then I run <code>git up</code> which is an alias to <code>pull --rebase --autostash</code>. Finally I successfully commit, then I copy paste the URL returned by GitHub to open a PR. Then I merge the PR and run <code>git ma</code> to go back to the primary branch, which is an alias to <code>ma = "!f() {git checkout $(git primary) &amp;&amp;git pull;}; f"</code>.</p><p>This workflow, I think, is pretty familiar for anyone working with GitHub a lot. Now you'll notice I'm not saying <code>git</code> because almost nothing I'm doing has anything to do with <code>git</code>. There's no advantage to my repo being local to my machine, because everything I need to actually merge and deploy code lives on GitHub. The CI runs there, the approval process runs there, the monitoring of the CI happens there, the injection of secrets happens there. If GitHub is down my local repo does, effectively, nothing. </p><p>My source of truth is always remote, which means I pay the price for <code>git</code> complexity locally but I don't benefit from it. At most jobs:</p><ul><li>You can't merge without GitHub (PRs are the merge mechanism)</li><li>You can't deploy without GitHub (Actions is the deployment trigger)</li><li>You can't get approval without GitHub (code review lives there)</li><li>Your commits are essentially "drafts" until they exist on GitHub</li></ul><p>This means the following is also true:</p><ul><li>You never work disconnected intentionally</li><li>You don't use local branches as long-lived divergent histories</li><li>You don't merge locally between branches (GitHub PRs handle this)</li><li>You don't use <code>git log</code> for archaeology — you use GitHub's blame/history UI (I often use git log personally but I have determined I'm in the minority on this). </li></ul><p>Almost all the features of <code>git</code> are wasted on me in this flow. Now because this tool serves a million purposes and is designed to operate in a way that almost nobody uses it for, we all pay the complexity price of <code>git</code> and never reap any of the benefits. So instead I keep having to add more aliases to paper over the shortcomings of <code>git</code>. </p><p>These are all the aliases I use at least once a week. </p><pre><code>[alias]
  up = pull --rebase --autostash
  l = log --pretty=oneline -n 20 --graph --abbrev-commit
  # View the current working tree status using the short format
  s = status -s
  p = !"git pull; git submodule foreach git pull origin master"
  ca = !git add -A &amp;&amp; git commit -av
  # Switch to a branch, creating it if necessary
  go = "!f() { git checkout -b \"$1\" 2&gt; /dev/null || git checkout \"$1\"; }; f"
  # Show verbose output about tags, branches or remotes
  tags = tag -l
  branches = branch -a
  remotes = remote -v
  dm = "!git branch --merged | grep -v '\\*' | xargs -n 1 git branch -d"
  contributors = shortlog --summary --numbered
  st = status
  primary = "!f() { \
    git branch -a | \
    sed -n -E -e '/remotes.origin.ma(in|ster)$/s@remotes/origin/@@p'; \
  }; f"
  # Switch to main or master, whichever exists, and update it.
  ma = "!f() { \
    git checkout $(git primary) &amp;&amp; \
    git pull; \
  }; f"
  mma = "!f() { \
    git ma &amp;&amp; \
    git pull upstream $(git primary) --ff-only &amp;&amp; \
    git push; \
  }; f"</code></pre><h3>Enter GitButler CLI</h3><p><strong>Git's offline-first design creates friction for online-first workflows, and GitButler CLI eliminates that friction by being honest about how we actually work.</strong></p><p>(Edit: I forgot to add this disclaimer. I am not, nor have ever been an employee/investor/best friends with anyone from GitButler. They don't care that I've written this and I didn't communicate with anyone from that team before I wrote this.)</p><p>So let's take the most basic command as an example. This is my flow that I do 2-3 times a day without my aliases. </p><pre><code>git checkout main
git pull
git checkout -b my-feature
# or if you're already on a branch:
git pull --rebase --autostash 
git status</code></pre><p>I do this because <code>git</code> can't make assumptions about the state of the world. </p><ul><li>Your local repo might be offline for days or weeks</li><li>The "remote" might be someone else's laptop, not a central server</li><li>Divergent histories are expected and merging is a deliberate, considered act</li></ul><p>However because GitButler is designed with the assumption that I'm working online, we can skip a lot of this nonsense. </p><figure><img src="https://matduggan.com/content/images/2026/02/image-8.png" alt="" width="1586" height="488" /></figure><p>It's status command understands that there is always a remote main that I care about and that when I run a status that I need to understand my status <em>relative</em> to the remote main as it exists right now. Not how it existed the last time I remembered to pull. </p><p>However this is far from the best trick it has up its sleeve. </p><h2><strong>Parallel Branches: The Problem Git Can't Solve</strong></h2><p>You're working on a feature, notice an unrelated bug, and now you have to stash, checkout, fix, commit, push, checkout back, stash pop. Context switching is expensive and error-prone. </p><p>GitButler effectively hacks a solution into <code>git</code> that fixes this with multiple branches applied simultaneously. Assign files to different branches without leaving your workspace. What do I mean by that. Let's start again with my status </p><figure><img src="https://matduggan.com/content/images/2026/02/image-9.png" alt="" width="1582" height="482" /></figure><p>Great looks good. Alright so lets say I make 2 new branches. I'm working on a new feature for adding auth and while I'm working on that, I see a typo I need to fix in a YAML. </p><figure><img src="https://matduggan.com/content/images/2026/02/image-10.png" alt="" width="1586" height="912" /></figure><p>I can work on both things at the same time:</p><pre><code>but stage istar_metrics_text.py feature-auth
but stage example.txt bugfix-typo</code></pre><figure><img src="https://matduggan.com/content/images/2026/02/image-11.png" alt="" width="1590" height="804" /></figure><p>And easily commit to both at the same time without doing <em>anything weird</em>. </p><figure><img src="https://matduggan.com/content/images/2026/02/image-12.png" alt="" width="1588" height="946" /></figure><h3>Stacked PRs Without the Rebase Nightmare</h3><p>Stacked PRs are the "right" way to break up large changes so people on your team don't throw up at being asked to review 2000 lines, but Git makes them miserable. When the base branch gets feedback, you have to rebase every dependent branch, resolve conflicts, force-push, and pray. Git doesn't understand branch dependencies. It treats every branch as independent, so <em>you</em> have to manually maintain the stack.</p><p>GitButler solves this problem with First-class stacked branches. The dependency is explicit, and updates propagate automatically.</p><p>So what do I mean. Let's say I make a new API endpoint in some Django app. First I make the branch. </p><pre><code>but branch new api-endpoints
# Then add my stuff to it
but commit -m "add REST endpoints" api-endpoints
# Create a stacked branch on top
but branch new --anchor api-endpoints api-tests
</code></pre><figure><img src="https://matduggan.com/content/images/2026/02/image-14.png" alt="" width="630" height="216" /></figure><p>So let's say I'm working on the <code>api-endpoints</code> branch and get some good feedback on my PR. It's easy to resolve the comments there while leaving my <code>api-tests</code> branched off this <code>api-endpoints</code> as a stacked thing that understands the relationship back to the first branch as shown here. </p><figure><img src="https://matduggan.com/content/images/2026/02/image-15.png" alt="" width="762" height="276" /></figure><p>In practice this is just a much nicer way of dealing with a super common workflow. </p><h3>Easy Undo</h3><p>Maybe the most requested feature from new <code>git</code> users I encounter is an easier undo. When you mess up in Git, recovery means diving into <code>git reflog</code>, understanding the cryptic output, and hoping you pick the right <code>HEAD@{n}</code>. One wrong move and you've made it worse.</p><p>GitButlers <code>oplog</code> is just easier to use. So the basic undo functionality is super simple to understand. </p><figure><img src="https://matduggan.com/content/images/2026/02/image-16.png" alt="" width="896" height="388" /></figure><p><code>but undo</code> rolls me back one operation. </p><figure><img src="https://matduggan.com/content/images/2026/02/image-17.png" alt="" width="1104" height="558" /></figure><p>To me the mental model of a snapshot makes a lot more sense than the git history model. I do an action, I want to undo that action. This is better than the git option of:</p><pre><code>git log --oneline                 # figure out what you committed
git reset --soft HEAD~1           # undo commit, keep changes staged
git stash                         # stash the changes
git checkout correct-branch       # switch branches
git stash pop                     # restore changes (hope no conflict)
git add .                         # re-stage
git commit -m "message"           # recommit</code></pre><h3>Very exciting tool</h3><p>I've been using GitButler in my daily work since I got the email that the CLI was available and I've really loved it. I'm a huge fan of what this team is doing to effectively remodel and simplify Git operations in a world where almost nobody is using it in the way the tool was originally imagined to be used. I strongly encourage folks go check it out for free at: <a href="https://docs.gitbutler.com/cli-guides/cli-tutorial/tutorial-overview" target="_blank" rel="noopener noreferrer">https://docs.gitbutler.com/cli-guides/cli-tutorial/tutorial-overview</a>. It does a ton of things (like help you manage PRs) that I didn't even touch on here. </p><p>Let me know if you find something cool that I forgot at: <a href="https://c.im/@matdevdug" target="_blank" rel="noopener noreferrer">https://c.im/@matdevdug</a></p></div> <footer class="article-footer" data-astro-cid-wrgicudb> <div class="action-row" data-astro-cid-wrgicudb> <a href="https://matduggan.com/gitbutler-cli-is-really-good/" target="_blank" rel="noopener noreferrer" class="read-original-btn" data-astro-cid-wrgicudb>
阅读原文 ↗
</a> </div> <div class="back-to-list" data-astro-cid-wrgicudb> <a href="/reading-list" class="back-link" data-astro-cid-wrgicudb>← 返回订阅列表</a> </div> </footer> </article> </div>  </main> <footer class="site-footer" aria-label="Site footer" data-astro-cid-sz7xmlte> <div class="footer-content" data-astro-cid-sz7xmlte> <p class="footer-text" data-astro-cid-sz7xmlte>
&copy; 2026 AstroBlog
</p> <p class="footer-text" data-astro-cid-sz7xmlte>
Built with  <a href="https://astro.build/" target="_blank" rel="noopener noreferrer" class="footer-link" data-astro-cid-sz7xmlte>
Astro
</a> </p> </div> </footer>  </body></html> 