<!DOCTYPE html><html lang="zh-CN" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.17.1"><meta name="description" content="简介：游戏可在 minesweeper.jayd.ml 游玩，AGPL 源码已开源。重现 Windows 2000 排雷游戏以尽可能精确还原经典体验为目的。"><meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self'; font-src 'self' data:;"><link rel="canonical" href="https://blog.yuyins.com/reading-list/windows-2000-minesweeper-recreated-in-godot-41-h54jaw/"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://blog.yuyins.com/reading-list/windows-2000-minesweeper-recreated-in-godot-41-h54jaw/"><meta property="og:title" content="Windows 2000 排雷游戏在 Godot 4.1 中重现"><meta property="og:description" content="简介：游戏可在 minesweeper.jayd.ml 游玩，AGPL 源码已开源。重现 Windows 2000 排雷游戏以尽可能精确还原经典体验为目的。"><meta property="og:image" content="https://blog.yuyins.com/favicon.svg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://blog.yuyins.com/reading-list/windows-2000-minesweeper-recreated-in-godot-41-h54jaw/"><meta property="twitter:title" content="Windows 2000 排雷游戏在 Godot 4.1 中重现"><meta property="twitter:description" content="简介：游戏可在 minesweeper.jayd.ml 游玩，AGPL 源码已开源。重现 Windows 2000 排雷游戏以尽可能精确还原经典体验为目的。"><meta property="twitter:image" content="https://blog.yuyins.com/favicon.svg"><title>Windows 2000 排雷游戏在 Godot 4.1 中重现</title><!-- Theme and color scheme script (runs before page loads to prevent flash) --><script>
			// 初始化配色方案 - 默认使用 stone-amber
			const colorScheme = localStorage.getItem('colorScheme') || 'stone-amber';
			document.documentElement.setAttribute('data-color', colorScheme);

			// 强制使用浅色主题
			document.documentElement.setAttribute('data-theme', 'light');
		</script><link rel="stylesheet" href="/_astro/_slug_.BK6BiV5P.css">
<style>.blog-post-container[data-astro-cid-wrgicudb]{width:100%;margin:0 auto;padding:2rem 0}.blog-post[data-astro-cid-wrgicudb]{width:100%;min-width:0;max-width:42rem;margin:0 auto}.article-header[data-astro-cid-wrgicudb]{margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--border)}.article-header[data-astro-cid-wrgicudb] h1[data-astro-cid-wrgicudb]{font-size:2rem;line-height:1.3;margin-bottom:1rem;font-weight:700;color:var(--foreground);word-break:break-word}.article-meta[data-astro-cid-wrgicudb]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:var(--muted-foreground)}.source-tag[data-astro-cid-wrgicudb]{background-color:var(--muted);color:var(--foreground);padding:.125rem .5rem;border-radius:9999px;font-weight:500;font-size:.75rem;text-decoration:none;transition:opacity .2s}.source-tag[data-astro-cid-wrgicudb]:hover{opacity:.8}.separator[data-astro-cid-wrgicudb]{color:var(--border)}.article-content[data-astro-cid-wrgicudb]{line-height:1.8;margin-bottom:3rem;font-size:1.0625rem;color:var(--foreground)}.article-content[data-astro-cid-wrgicudb] h2{margin-top:2rem;margin-bottom:1rem;font-size:1.5rem;font-weight:600}.article-content[data-astro-cid-wrgicudb] h3{margin-top:1.5rem;margin-bottom:.75rem;font-size:1.25rem;font-weight:600}.article-content[data-astro-cid-wrgicudb] p{margin-bottom:1.25rem}.article-content[data-astro-cid-wrgicudb] a{color:var(--accent);text-decoration:underline;text-underline-offset:2px}.article-content[data-astro-cid-wrgicudb] img{max-width:100%;height:auto;border-radius:.5rem;margin:1.5rem 0}.article-content[data-astro-cid-wrgicudb] blockquote{border-left:4px solid var(--border);padding-left:1rem;margin:1.5rem 0;color:var(--muted-foreground);font-style:italic}.article-content[data-astro-cid-wrgicudb] pre{background:var(--muted);padding:1rem;border-radius:.5rem;overflow-x:auto;font-family:monospace;margin:1.5rem 0}.article-content[data-astro-cid-wrgicudb] ul,.article-content[data-astro-cid-wrgicudb] ol{padding-left:1.5rem;margin-bottom:1.25rem}.article-content[data-astro-cid-wrgicudb] li{margin-bottom:.5rem}.article-footer[data-astro-cid-wrgicudb]{padding-top:2rem;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:1.5rem;align-items:center}.action-row[data-astro-cid-wrgicudb]{display:flex;justify-content:center}.read-original-btn[data-astro-cid-wrgicudb]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background-color:var(--foreground);color:var(--background);border-radius:.5rem;font-weight:500;text-decoration:none;transition:opacity .2s}.read-original-btn[data-astro-cid-wrgicudb]:hover{opacity:.9}.back-to-list[data-astro-cid-wrgicudb]{text-align:center}.back-link[data-astro-cid-wrgicudb]{color:var(--muted-foreground);text-decoration:none;font-size:.875rem;transition:color .2s}.back-link[data-astro-cid-wrgicudb]:hover{color:var(--foreground)}
</style></head> <body data-astro-cid-sckkx6r4> <a id="skip-to-content" href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-accent focus:text-background" data-astro-cid-sckkx6r4>Skip to content</a> <header class="header" data-astro-cid-3ef6ksr2> <nav class="header-nav" aria-label="Main navigation" data-astro-cid-3ef6ksr2> <a href="/" class="header-logo" data-astro-cid-3ef6ksr2>
AstroBlog
</a> <div class="header-links" data-astro-cid-3ef6ksr2> <ul class="nav-list" data-astro-cid-3ef6ksr2> <li data-astro-cid-3ef6ksr2> <a href="/" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 文章 </a> </li><li data-astro-cid-3ef6ksr2> <a href="/category" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 分类 </a> </li><li data-astro-cid-3ef6ksr2> <a href="/reading-list" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 订阅 </a> </li><li data-astro-cid-3ef6ksr2> <a href="/about" class="nav-link" data-astro-prefetch="true" data-astro-cid-3ef6ksr2> 关于 </a> </li> </ul> <div class="header-actions" data-astro-cid-3ef6ksr2> <div id="search" data-astro-cid-otpdt6jm> <button id="search-button" class="search-toggle" aria-label="打开搜索" title="搜索 (⌘K)" data-astro-cid-otpdt6jm> <svg class="search-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-otpdt6jm> <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-astro-cid-otpdt6jm></circle> <path d="M20 20L16.5 16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-astro-cid-otpdt6jm></path> </svg> </button> <dialog id="search-dialog" class="search-modal" data-astro-cid-otpdt6jm> <div class="modal-content" data-astro-cid-otpdt6jm> <div class="modal-header" data-astro-cid-otpdt6jm> <h2 class="modal-title" data-astro-cid-otpdt6jm>搜索文章</h2> <button id="close-search" class="close-button" aria-label="关闭搜索" data-astro-cid-otpdt6jm> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-otpdt6jm> <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-otpdt6jm></path> </svg> </button> </div> <div id="pagefind-ui" data-astro-cid-otpdt6jm></div> </div> </dialog> </div> <script type="module">let d=!1;const c="pagefind-loaded";async function l(t=0){if(sessionStorage.getItem(c)==="true")return g(),!0;const r=document.getElementById("pagefind-ui");if(!r)return!1;r.innerHTML='<div style="padding: 2rem; text-align: center; color: var(--muted-foreground);">加载中...</div>';try{return await new Promise((o,s)=>{const a=document.createElement("script");a.src="/pagefind/pagefind-ui.js",a.onload=o,a.onerror=s,document.head.appendChild(a)}),g(),sessionStorage.setItem(c,"true"),!0}catch(i){return console.error("Failed to load search:",i),t<2?(console.log(`Retrying search load... (${t+1}/2)`),await new Promise(o=>setTimeout(o,1e3)),l(t+1)):(r&&(r.innerHTML=`
          <div style="padding: 2rem; text-align: center;">
            <p style="color: var(--muted-foreground); margin-bottom: 1rem;">搜索功能加载失败</p>
            <button id="retry-search" style="padding: 0.5rem 1rem; background: var(--accent); color: var(--accent-foreground); border: none; border-radius: 0.375rem; cursor: pointer;">
              重试
            </button>
          </div>
        `,document.getElementById("retry-search")?.addEventListener("click",()=>{sessionStorage.removeItem(c),l(0)})),!1)}}function g(){typeof PagefindUI<"u"&&(new PagefindUI({element:"#pagefind-ui",showSubResults:!0,showImages:!1,excerptLength:15,translations:{placeholder:"搜索文章...",clear_search:"清除",load_more:"加载更多",search_label:"搜索此站点",filters_label:"筛选",zero_results:"未找到结果 [SEARCH_TERM]",many_results:"找到 [COUNT] 个结果 [SEARCH_TERM]",one_result:"找到 [COUNT] 个结果 [SEARCH_TERM]",alt_search:"未找到 [SEARCH_TERM] 的结果。显示 [DIFFERENT_TERM] 的结果",search_suggestion:"未找到 [SEARCH_TERM] 的结果。尝试以下搜索：",searching:"搜索中 [SEARCH_TERM]..."}}),setTimeout(()=>{const t=document.querySelector(".pagefind-ui__search-input");t instanceof HTMLElement&&t.focus()},100))}function u(){if(d)return;d=!0;const t=document.getElementById("search-button"),n=document.getElementById("search-dialog"),r=document.getElementById("close-search");if(!t||!n||!r)return;let i=sessionStorage.getItem(c)==="true";const o=async()=>{n.showModal(),document.body.style.overflow="hidden",i?setTimeout(()=>{const e=document.querySelector(".pagefind-ui__search-input");e instanceof HTMLElement&&e.focus()},100):await l()&&(i=!0)},s=()=>{n.close(),document.body.style.overflow=""},a=e=>{e.target===n&&s()},m=e=>{e.key==="Escape"&&n.open&&s()},f=e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),n.open?s():o())};t.addEventListener("click",o),r.addEventListener("click",s),n.addEventListener("click",a),document.addEventListener("keydown",m),document.addEventListener("keydown",f),document.addEventListener("astro:before-swap",()=>{t.removeEventListener("click",o),r.removeEventListener("click",s),n.removeEventListener("click",a),document.removeEventListener("keydown",m),document.removeEventListener("keydown",f),d=!1},{once:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();document.addEventListener("astro:page-load",u);</script> <link href="/pagefind/pagefind-ui.css" rel="stylesheet">  </div> </div> </nav> </header>  <main id="main-content" data-pagefind-body class="main-content main-content--wide" data-astro-cid-sckkx6r4>  <div class="blog-post-container" data-astro-cid-wrgicudb> <article class="blog-post" data-astro-cid-wrgicudb> <header class="article-header" data-astro-cid-wrgicudb> <h1 data-astro-cid-wrgicudb>Windows 2000 排雷游戏在 Godot 4.1 中重现</h1> <div class="article-meta" data-astro-cid-wrgicudb> <a href="https://jayd.ml" target="_blank" rel="noopener noreferrer" class="source-tag" data-astro-cid-wrgicudb>jayd.ml</a> <span class="separator" data-astro-cid-wrgicudb>·</span> <time data-astro-cid-wrgicudb>2026年2月14日</time> </div> </header> <!-- 使用清洗后的安全 HTML 内容 --> <div class="article-content app-prose" data-astro-cid-wrgicudb><h2>TL;DR</h2>

<p><img src="/assets/posts/2026-02-14-godot-minesweeper/screenshot.png" /></p>

<p><a href="https://minesweeker.jayd.ml" target="_blank" rel="noopener noreferrer">Play the game at minesweeper.jayd.ml!</a></p>

<p><a href="https://github.com/jaydenmilne/godot-minesweeper" target="_blank" rel="noopener noreferrer">See the AGPL source code here!</a></p>

<h2>Why??</h2>

<p>I decided to recreate Windows 2000 minesweeper in Godot 4.1 as accurately as I
reasonably could. I wanted to get more familiar with Godot, and wanted a project
where I didn’t have to worry about what to do, only how to do it. In the end, I
ended up going down the rabbit hole and spending 30% of my time on the actual 
game and the other 70% on menus, dialogs, and other triviality.</p>

<p>It was fun working on stuff that I’d never get past a PM, like black and white 
mode, and recreating the ding/blinking window animation when you click on a 
window while a dialog is open.</p>

<p>The overall experience with Godot was very pleasant - working with Godot has
dispelled any desire I had to make my own game engine. Godot is lightweight and
well thought out.</p>

<h2>Overall Approach</h2>

<p>I wanted to recreate Minesweeper as pixel-perfect as I could. Depite my best
efforts (see Fonts below), I couldn’t get Godot to render the Windows 2000/9x
bitmapped fonts in a pixel perfect way, so the approach was to take screenshots
in a VM and only render text with Godot where absolutely needed (highscores).</p>

<h2>Font Rendering Purgatory</h2>

<p>I spent way, way too much time fiddling with fonts trying to get them to work.
In the end I got something that was close enough and try not to think about it 
too much.</p>

<p>Minesweeper in Windows 95 uses the bitmapped <a href="https://stackoverflow.com/questions/6057239/which-font-is-the-default-for-mfc-dialog-controls" target="_blank" rel="noopener noreferrer">“MS Shell Dlg”</a> font.</p>

<p>At first I tried to be clever and pull bitmapped fonts out of the <a href="https://github.com/kode54/wine/blob/master/fonts/ms_sans_serif.ttf" target="_blank" rel="noopener noreferrer">WINE project,</a> 
but those ended up not being an exact match (I guess whoever made them for WINE 
wanted them to be different?). They also only worked at certain pixel sizes.</p>

<p>Eventually I settled on a recreation called “W95FA” by Alle Sava. Sadly, the 
font’s website has been taken down since I started this project. For some reason
Godot won’t render this font right, and I tried about every option in Godot I 
could, and its just still not quite right.</p>

<p><img src="/assets/posts/2026-02-14-godot-minesweeper/fonts.png" /></p>

<p>I rabbit holed on this for way too long, it almost killed the project. Looking
back it was a silly thing to get hung up on.</p>

<h2>DPI Scaling</h2>

<p>I ended up rolling my own crazy DPI scaling and not using Godot’s built in stuff.</p>

<p>I wanted a combination of</p>

<ol>
  <li>Integer/pixel scaling, no fuzzy up or downscaling</li>
  <li>No fixed aspect ratios - should use the entire canvas</li>
  <li>Matching the browser window’s DPI automatically</li>
  <li>Automatically changing the DPI when the DPI of the document changes.</li>
</ol>

<p>This was surprisingly annoying to do. I ended up doing this by injecting some 
Javascript to read the CSS DPI, and then it calls a callback to update the Godot
scaling.</p>

<p><a href="https://github.com/jaydenmilne/godot-minesweeper/blob/main/godot-minesweeper/desktop.gd#L9" target="_blank" rel="noopener noreferrer">See how I did it here.</a></p>

<p>There is a “change dpi” button on the right of the screen, helpful for when you
are playing comically large games.</p>

<h2>Custom Splash Screen</h2>

<p><img src="/assets/posts/2026-02-14-godot-minesweeper/splash.png" /></p>

<p>One thing I think is really important for a web exported project is to make a 
custom splash screen. I threw this one together, complete with gradients and
animations, and I think it really elevates the experience to see that. It’s just
a little thing to show that the creator cared and went the extra mile.</p>

<h2>Cheats</h2>

<p>I implemented the original <kbd>XYZZY</kbd> + <kbd>Shift</kbd> + <kbd>Enter</kbd>
cheat.</p>

<p>One thing I remember thinking about and being frustrated by as a kid were the 
limits in the Custom Size dialog. Why did they have to hold me back??</p>

<p>So in my version, when you press the <code>[?]</code> button in the corner of the custom 
size dialog, it turns off all the bounds checks, and you can do stupid things
like this:</p>

<p><img src="/assets/posts/2026-02-14-godot-minesweeper/stupid.png" /></p>

<p>Note that this completely disables <em>all bounds checking</em>, so you can break your
game easily with this. Since it tries to save and load your game too, it may lock
up if you do something dumb and then lock up again every time you reload the page.
Clear your cookies and site data if this happens to you.</p>

<p>The only other change is that I made it so it saves your game to localstorage, so
if you reload the page your game resumes. You could probably cheat with this,
but I think its a huge quality of life feature.</p>

<h2>The part where I gave up right before shipping it for a year because I’m a perfectionist</h2>

<p>I thought I had done every last feature, and was about to triumphantly ship and 
make this blog post, when I learned about <a href="https://minesweeper.fandom.com/wiki/Chording" target="_blank" rel="noopener noreferrer">chording</a>, which allows you to use Left + Right Control Click to reveal more cells at once.</p>

<p>The ship train derailed and was a smoldering wreck from <a href="https://github.com/jaydenmilne/godot-minesweeper/commit/71ba74ba096d7eda107a5ef3890904bdb06bcc5a" target="_blank" rel="noopener noreferrer">December 2023</a>
until <a href="https://github.com/jaydenmilne/godot-minesweeper/commit/18a4271592e426cdeb294462df3863749bc9fd76" target="_blank" rel="noopener noreferrer">March 2025</a>, 
when I finally decided to finish it and added chording. I’m continually amazed
by my ability to procrastinate. Then I procrastinated this blog post until Feb
2026!</p>

<h2>Overall</h2>

<p>Using Godot was quite pleasant, I’m proud of how this project turned out. Maybe
I’ll actually play Minesweeper now!</p></div> <footer class="article-footer" data-astro-cid-wrgicudb> <div class="action-row" data-astro-cid-wrgicudb> <a href="https://jayd.ml/2026/02/14/godot-minesweeper.html" target="_blank" rel="noopener noreferrer" class="read-original-btn" data-astro-cid-wrgicudb>
阅读原文 ↗
</a> </div> <div class="back-to-list" data-astro-cid-wrgicudb> <a href="/reading-list" class="back-link" data-astro-cid-wrgicudb>← 返回订阅列表</a> </div> </footer> </article> </div>  </main> <footer class="site-footer" aria-label="Site footer" data-astro-cid-sz7xmlte> <div class="footer-content" data-astro-cid-sz7xmlte> <p class="footer-text" data-astro-cid-sz7xmlte>
&copy; 2026 AstroBlog
</p> <p class="footer-text" data-astro-cid-sz7xmlte>
Built with  <a href="https://astro.build/" target="_blank" rel="noopener noreferrer" class="footer-link" data-astro-cid-sz7xmlte>
Astro
</a> </p> </div> </footer>  </body></html> 